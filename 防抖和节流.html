<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <input type="text" id='ipt'>
</body>
<script>
    const ipt = document.getElementById('ipt')
    // ipt.addEventListener('keyup',function(e){
    //     input(e.target.value)
    // })
    function input(value) {
        console.log(value)
    }
    /*
        防抖 用户输入完成一段时间后，再调用打印函数
    */
    function debounce(func, delay) {//防抖
        let timer
        function fn(args) {
            const that = this
            clearTimeout(timer)
            timer = setTimeout(() => {
                func.call(that, args)
            }, delay)
        }
        return fn
    }
    const debounceInput = debounce(input, 500)
    // ipt.addEventListener('keyup',function(e){
    //     debounceInput(e.target.value)
    // })
    /*
        节流 用户输入完一段时间内在一直输入也无效 等平稳输入了再打印输出
        类似于技能的冷却时间
    */
    function throttle(fn) {//http://www.360doc.com/content/20/0729/09/26535044_927369609.shtml
        let flag = true
        return function (args) {
            if (!flag) return
            flag = false
            setTimeout(function () {
                fn.call(this,args.target.value)
                flag = true
            }, 500)
        }
    }
    const throttleInput = throttle(input, 500)
    // ipt.addEventListener('keyup', throttleInput)
    // function throttle(fun, delay) {//https://www.cnblogs.com/smallpen/p/10289050.html
    //     let last, timer
    //     return function (args) {
    //         const that = this
    //         const now = +new Date()
    //         if (last && now < last + delay) {
    //             clearTimeout(timer)
    //             timer = setTimeout(function () {
    //                 fun.call(that, args)
    //             }, delay)
    //         } else {
    //             last = now
    //             fun.call(that, args)
    //         }
    //     }
    // }
    ipt.addEventListener('keyup', function(e){
        throttleInput(e)
    })
</script>

</html>